<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Login</title>
    <link rel="stylesheet" href="/assets/css/style.css" />
</head>

<body>
    <main class="container">
        <section class="card">
            <h2>Admin Login</h2>
            <form id="login">
                <div class="form-row"><input id="u" placeholder="username" /></div>
                <div class="form-row"><input id="p" type="password" placeholder="password" /></div><button
                    type="submit">Login</button>
            </form>
            <div id="m"></div>
        </section>
    </main>
    <script src="/assets/js/api.js"></script>
    <script>
        document.getElementById('login').addEventListener('submit', async function (e) {
            e.preventDefault();
            var u = document.getElementById('u').value;
            var p = document.getElementById('p').value;
            try {
                var res = await api.post('/auth/login', {
                    username: u,
                    password: p
                });
                localStorage.setItem('token', res.token);
                location.href = '/admin/dashboard.html';
            } catch (err) {
                document.getElementById('m').innerText = 'Login gagal'
            }
        });
    </script>
</body>

</html>